<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>


  <button id="button" style="margin-left: 20px">Say Hi To All</button>
  <h1>BroadcastChannel</h1>
  <div style="display: flex; justify-content:space-between">
    <div id="content"></div>
   <div>
    <iframe src="/broadcastChannelIframe.html" height="300"></iframe>
    <iframe src="/broadcastChannelIframe.html" height="300"></iframe>
    <iframe src="/broadcastChannelIframe.html" height="300"></iframe>
    <iframe src="/broadcastChannelIframe.html" height="300"></iframe>
  </div>
  </div>>

  <script>

    const button = document.getElementById('button');
    const content = document.getElementById('content');
    const channel = new BroadcastChannel("test")

    button.addEventListener('click',(event)=>{
      addMessage("Hi")
      channel.postMessage("Hi")
    })

    channel.addEventListener('message',(event)=>{
      addMessage(event.data)
    })

    function addMessage(message){
      var p = document.createElement('p');
      p.innerHTML = message;
      content.appendChild(p)
    }


  </script>
</body>

</html>